@(stage: String, estate: model.Estate, totalSunkCost: Float)(implicit request: play.api.mvc.Security.AuthenticatedRequest[_, User], money: java.text.DecimalFormat)

@import model._

@main("Status Monitor", stage=Some(stage), refreshSecs = Some(15), scripts = List("assets/js/stats-sparkline.js")) {

    <div class="container cluster-status">
        <div class="row">

        @for(column <- estate(stage).grouped(math.max(estate(stage).size / 3, 1))) {
            <div class="col-lg-4 hidden-md">
            @for(asg <- column) {
                @snippets.renderASG(asg)
            }
            </div>
        }
        @for(column <- estate(stage).grouped(math.max(estate(stage).size / 2, 1))) {
            <div class="col-md-6 visible-md">
            @for(asg <- column) {
                @snippets.renderASG(asg)
            }
            </div>
        }
        </div>
        <div class="row">
            <div class="well">
                Approximate total monthly cost for all stages: $@money.format(estate(stage).map(_.approxMonthlyCost).sum)
                @if(totalSunkCost > 0) { (total sunk cost: $@money.format(totalSunkCost)) }
            </div>
        </div>
    </div>
}